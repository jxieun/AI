# ğŸ¤– AI íˆ¬ì ì–´ë“œë°”ì´ì € (jeonbongjun-ai)

<div align="center">

![Python](https://img.shields.io/badge/Python-3.10+-3776AB?style=for-the-badge&logo=python&logoColor=white)
![FastAPI](https://img.shields.io/badge/FastAPI-0.110.0-009688?style=for-the-badge&logo=fastapi&logoColor=white)
![LangChain](https://img.shields.io/badge/LangChain-0.3.27-1C3C3C?style=for-the-badge&logo=chainlink&logoColor=white)
![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4-412991?style=for-the-badge&logo=openai&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)
![Kubernetes](https://img.shields.io/badge/Kubernetes-326CE5?style=for-the-badge&logo=kubernetes&logoColor=white)

**LangChain + RAG ê¸°ë°˜ ì‹¤ì‹œê°„ íˆ¬ì ìƒë‹´ AI ì„œë¹„ìŠ¤**

[íŠ¹ì§•](#-ì£¼ìš”-íŠ¹ì§•) â€¢ [ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜) â€¢ [ì‹œì‘í•˜ê¸°](#-ë¹ ë¥¸-ì‹œì‘) â€¢ [API ë¬¸ì„œ](#-api-ë¬¸ì„œ) â€¢ [ë°°í¬](#-ë°°í¬)

</div>

---

## ğŸ“‹ ëª©ì°¨

- [ê°œìš”](#-ê°œìš”)
- [ì£¼ìš” íŠ¹ì§•](#-ì£¼ìš”-íŠ¹ì§•)
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ë¹ ë¥¸ ì‹œì‘](#-ë¹ ë¥¸-ì‹œì‘)
- [API ë¬¸ì„œ](#-api-ë¬¸ì„œ)
- [ì§ˆë¬¸ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸](#-ì§ˆë¬¸-ì²˜ë¦¬-íŒŒì´í”„ë¼ì¸)
- [ë°°í¬](#-ë°°í¬)
- [ê°œë°œ ê°€ì´ë“œ](#-ê°œë°œ-ê°€ì´ë“œ)
- [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
- [ë¼ì´ì„ ìŠ¤](#-ë¼ì´ì„ ìŠ¤)

---

## ğŸ¯ ê°œìš”

AI íˆ¬ì ì–´ë“œë°”ì´ì €ëŠ” **LangChain**ê³¼ **RAG(Retrieval-Augmented Generation)** ê¸°ìˆ ì„ í™œìš©í•˜ì—¬ ì‹¤ì‹œê°„ íˆ¬ì ìƒë‹´ì„ ì œê³µí•˜ëŠ” ì§€ëŠ¥í˜• AI ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

### í•µì‹¬ ê¸°ëŠ¥
- ğŸ“Š **ì‹¤ì‹œê°„ ì£¼ê°€ ë¶„ì„** - pykrx APIë¥¼ í†µí•œ í•œêµ­ ì£¼ì‹ì‹œì¥ ë°ì´í„°
- ğŸ“ˆ **ê²½ì œì§€í‘œ í•´ì„** - MariaDB ê¸°ë°˜ ê±°ì‹œê²½ì œ ì§€í‘œ ë¶„ì„
- ğŸ“‘ **ì¦ê¶Œì‚¬ ë¦¬í¬íŠ¸ ê²€ìƒ‰** - ChromaDB ë²¡í„° ê²€ìƒ‰ì„ í†µí•œ ì• ë„ë¦¬ìŠ¤íŠ¸ ë¦¬í¬íŠ¸ ë¶„ì„
- ğŸ’¡ **ê°œì¸í™”ëœ íˆ¬ì ì¡°ì–¸** - GPT-4 ê¸°ë°˜ ë§ì¶¤í˜• íˆ¬ì ì „ëµ ì œê³µ

---

## âœ¨ ì£¼ìš” íŠ¹ì§•

### ğŸ” ì§€ëŠ¥í˜• ì§ˆë¬¸ ë¶„ë¥˜ ì‹œìŠ¤í…œ
```
ì‚¬ìš©ì ì§ˆë¬¸ â†’ AI ë¶„ë¥˜ê¸° â†’ 4ê°€ì§€ ì¹´í…Œê³ ë¦¬
â”œâ”€ economic_indicator (ê²½ì œì§€í‘œ)
â”œâ”€ stock_price (ì£¼ê°€ ë¶„ì„)
â”œâ”€ analyst_report (ì¦ê¶Œì‚¬ ë¦¬í¬íŠ¸)
â””â”€ general (ì¼ë°˜ íˆ¬ì ìƒë‹´)
```

### ğŸ¨ í•˜ì´ë¸Œë¦¬ë“œ ë°ì´í„° ì†ŒìŠ¤
| ì¹´í…Œê³ ë¦¬ | ë°ì´í„° ì†ŒìŠ¤ | ì²˜ë¦¬ ë°©ì‹ |
|---------|-----------|---------|
| ê²½ì œì§€í‘œ | MariaDB (Spring Boot) | REST API + LLM í•´ì„ |
| ì£¼ê°€ ë°ì´í„° | pykrx (í•œêµ­ê±°ë˜ì†Œ) | Real-time API + ê°ì„± ë¶„ì„ |
| ë¦¬í¬íŠ¸ | ChromaDB (PDF ì„ë² ë”©) | RAG ê²€ìƒ‰ + LLM ë‹µë³€ |
| ì¼ë°˜ ìƒë‹´ | - | GPT-4 Direct |

### âš¡ ê³ ì„±ëŠ¥ ì•„í‚¤í…ì²˜
- **ë¹„ë™ê¸° ì²˜ë¦¬**: FastAPI + httpxë¥¼ í†µí•œ ê³ ì† API ì²˜ë¦¬
- **ë²¡í„° ê²€ìƒ‰**: ChromaDBë¥¼ í™œìš©í•œ ì˜ë¯¸ ê¸°ë°˜ ë¬¸ì„œ ê²€ìƒ‰
- **ìºì‹±**: ëŒ€ì‹œë³´ë“œ ë°ì´í„° 60ì´ˆ ìºì‹±ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”
- **ì»¨í…Œì´ë„ˆí™”**: Docker + Kubernetes ê¸°ë°˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤

---

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend (React)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Backend (Spring Boot - Port 8080)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Controllers: /api/chat, /api/stocks, /api/indicatorsâ”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                       â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          MariaDB (ê²½ì œì§€í‘œ, ì¢…ëª© ë§ˆìŠ¤í„°)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               AI Service (FastAPI - Port 8000)               â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  POST /ai/query (ë©”ì¸ ì§ˆë¬¸ ì²˜ë¦¬ ì—”ë“œí¬ì¸íŠ¸)          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                       â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         Question Classifier (LLM ê¸°ë°˜ ë¶„ë¥˜)         â”‚    â”‚
â”‚  â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚     â”‚          â”‚          â”‚          â”‚                       â”‚
â”‚  â”Œâ”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚Economicâ”‚Stock  â”‚Analystâ”‚General â”‚                        â”‚
â”‚  â”‚Chain  â”‚Chain  â”‚Chain  â”‚Chain  â”‚                         â”‚
â”‚  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                 â”‚
â”‚     â”‚         â”‚          â”‚          â”‚                       â”‚
â”‚  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”   â”‚                        â”‚
â”‚  â”‚MariaDB â”‚ â”‚pykrx  â”‚ â”‚ChromaDB   â”‚                       â”‚
â”‚  â”‚via API â”‚ â”‚API    â”‚ â”‚Vector DBâ”‚  â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                        â”‚
â”‚                                     â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          GPT-4 Turbo (OpenAI API)                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° í”Œë¡œìš°

```mermaid
graph LR
    A[ì‚¬ìš©ì ì§ˆë¬¸] --> B[FastAPI /ai/query]
    B --> C{ì§ˆë¬¸ ë¶„ë¥˜}
    C -->|ê²½ì œì§€í‘œ| D[Spring Boot API]
    C -->|ì£¼ê°€| E[pykrx API]
    C -->|ë¦¬í¬íŠ¸| F[ChromaDB RAG]
    C -->|ì¼ë°˜| G[GPT-4 Direct]
    D --> H[LLM í•´ì„]
    E --> I[ê°ì„± ë¶„ì„]
    F --> J[ë¬¸ë§¥ ê¸°ë°˜ ë‹µë³€]
    G --> K[íˆ¬ì ì¡°ì–¸]
    H --> L[ìµœì¢… ì‘ë‹µ]
    I --> L
    J --> L
    K --> L
```

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Core Framework
- **FastAPI** 0.110.0 - ê³ ì„±ëŠ¥ ë¹„ë™ê¸° ì›¹ í”„ë ˆì„ì›Œí¬
- **Python** 3.10+ - ì•ˆì •ì ì¸ ìµœì‹  ë²„ì „

### AI/ML Stack
- **LangChain** 0.3.27 - LLM ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë ˆì„ì›Œí¬
- **OpenAI GPT-4 Turbo** - ìì—°ì–´ ì´í•´ ë° ìƒì„±
- **ChromaDB** 0.4.24 - ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤
- **tiktoken** 0.12.0 - í† í° ì¹´ìš´íŒ…

### Data Sources
- **pykrx** 1.0.51 - í•œêµ­ê±°ë˜ì†Œ API
- **httpx** 0.28.1 - ë¹„ë™ê¸° HTTP í´ë¼ì´ì–¸íŠ¸
- **pandas** 2.2.1 - ë°ì´í„° ë¶„ì„

### Document Processing
- **pypdf** 4.1.0 - PDF ë¬¸ì„œ íŒŒì‹±
- **langchain-text-splitters** - ìŠ¤ë§ˆíŠ¸ í…ìŠ¤íŠ¸ ì²­í‚¹

### DevOps
- **Docker** - ì»¨í…Œì´ë„ˆí™”
- **Kubernetes** (GKE) - ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- **GitHub Actions** - CI/CD

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
jeonbongjun-ai/
â”œâ”€â”€ ğŸ“‚ chains/                      # LangChain ì²´ì¸ ë¡œì§
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ classifier.py               # ì§ˆë¬¸ ë¶„ë¥˜ê¸° (4-way classification)
â”‚   â”œâ”€â”€ rag_chain.py                # RAG ì²´ì¸ (ì¦ê¶Œì‚¬ ë¦¬í¬íŠ¸)
â”‚   â”œâ”€â”€ indicator_chain.py          # ê²½ì œì§€í‘œ ë¶„ì„ ì²´ì¸
â”‚   â”œâ”€â”€ stock_chain.py              # ì£¼ê°€ ë¶„ì„ + ê°ì„± ë¶„ì„
â”‚   â””â”€â”€ general_chain.py            # ì¼ë°˜ íˆ¬ì ìƒë‹´
â”‚
â”œâ”€â”€ ğŸ“‚ routers/                     # FastAPI ë¼ìš°í„°
â”‚   â””â”€â”€ market_data.py              # ì‹œì¥ ë°ì´í„° API
â”‚       â”œâ”€â”€ GET /api/dashboard      # í†µí•© ëŒ€ì‹œë³´ë“œ
â”‚       â”œâ”€â”€ GET /api/stock/{ticker} # ê°œë³„ ì¢…ëª© ì¡°íšŒ
â”‚       â””â”€â”€ POST /api/stock-details # ë‹¤ì¤‘ ì¢…ëª© ì¡°íšŒ
â”‚
â”œâ”€â”€ ğŸ“‚ utils/                       # ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ
â”‚   â”œâ”€â”€ config.py                   # í™˜ê²½ ì„¤ì • (Pydantic)
â”‚   â”œâ”€â”€ logger.py                   # ë¡œê¹… ì„¤ì •
â”‚   â”œâ”€â”€ embedder.py                 # OpenAI ì„ë² ë”©
â”‚   â”œâ”€â”€ db_client.py                # ChromaDB í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ spring_client.py            # Spring Boot API í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ data_loader.py              # ë¬¸ì„œ ë¡œë” (PDF/CSV/JSON)
â”‚   â””â”€â”€ text_splitter.py            # í…ìŠ¤íŠ¸ ì²­í‚¹
â”‚
â”œâ”€â”€ ğŸ“‚ notebooks/                   # Jupyter ì‹¤í—˜ ë…¸íŠ¸ë¶
â”‚   â”œâ”€â”€ 01_classifier_test.ipynb    # ë¶„ë¥˜ê¸° í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ 02_rag_test.ipynb           # RAG íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ test_full_pipeline.ipynb    # ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸
â”‚
â”œâ”€â”€ ğŸ“‚ k8s/                         # Kubernetes ë§¤ë‹ˆí˜ìŠ¤íŠ¸
â”‚   â”œâ”€â”€ ai-service-deployment.yaml  # Deployment ì„¤ì •
â”‚   â”œâ”€â”€ ai-service-service.yaml     # Service (ClusterIP)
â”‚   â””â”€â”€ ai-config.yaml              # BackendConfig (Health Check)
â”‚
â”œâ”€â”€ ğŸ“‚ .github/workflows/           # GitHub Actions CI/CD
â”‚   â””â”€â”€ build-push-ai.yaml          # Docker ì´ë¯¸ì§€ ë¹Œë“œ ë° í‘¸ì‹œ
â”‚
â”œâ”€â”€ ğŸ“‚ data/                        # ë°ì´í„° ë””ë ‰í† ë¦¬ (gitignore)
â”‚   â”œâ”€â”€ reports/                    # ì¦ê¶Œì‚¬ ë¦¬í¬íŠ¸ PDF
â”‚   â”œâ”€â”€ news/                       # ë‰´ìŠ¤ ë°ì´í„°
â”‚   â””â”€â”€ indicators/                 # ê²½ì œì§€í‘œ CSV
â”‚
â”œâ”€â”€ ğŸ“‚ embeddings/                  # ChromaDB ì €ì¥ì†Œ (gitignore)
â”‚   â””â”€â”€ chromadb/                   # ë²¡í„° ì„ë² ë”© DB
â”‚
â”œâ”€â”€ ğŸ“‚ logs/                        # ë¡œê·¸ íŒŒì¼ (gitignore)
â”‚
â”œâ”€â”€ ğŸ“„ main.py                      # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”œâ”€â”€ ğŸ“„ Dockerfile                   # Docker ì´ë¯¸ì§€ ë¹Œë“œ ì„¤ì •
â”œâ”€â”€ ğŸ“„ requirements.txt             # Python ì˜ì¡´ì„±
â”œâ”€â”€ ğŸ“„ .env.example                 # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â”œâ”€â”€ ğŸ“„ .gitignore                   # Git ì œì™¸ íŒŒì¼
â””â”€â”€ ğŸ“„ README.md                    # í”„ë¡œì íŠ¸ ë¬¸ì„œ (ë³¸ íŒŒì¼)
```

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1ï¸âƒ£ ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Python 3.10 ì´ìƒ
- Docker (ì„ íƒì‚¬í•­)
- OpenAI API í‚¤
- Spring Boot ë°±ì—”ë“œ ì„œë²„ (í¬íŠ¸ 8080)

### 2ï¸âƒ£ ì„¤ì¹˜

```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/yourusername/jeonbongjun-ai.git
cd jeonbongjun-ai

# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt
```

### 3ï¸âƒ£ í™˜ê²½ ì„¤ì •

```bash
# .env íŒŒì¼ ìƒì„±
cp .env.example .env

# .env íŒŒì¼ í¸ì§‘ (í•„ìˆ˜!)
# OPENAI_API_KEY=sk-proj-your-actual-api-key
```

**.env ì˜ˆì‹œ**
```ini
# OpenAI API
OPENAI_API_KEY=sk-proj-your-actual-api-key-here

# FastAPI Settings
HOST=0.0.0.0
PORT=8000
DEBUG=True

# ChromaDB
CHROMA_DB_PATH=./embeddings/chromadb

# Logging
LOG_LEVEL=INFO
LOG_FILE=./logs/app.log
```

### 4ï¸âƒ£ ì„œë²„ ì‹¤í–‰

```bash
# FastAPI ì„œë²„ ì‹œì‘
python main.py

# ë˜ëŠ” uvicorn ì§ì ‘ ì‹¤í–‰
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

ì„œë²„ ì‹¤í–‰ í›„ ì ‘ì†:
- **API ë¬¸ì„œ**: http://localhost:8000/docs
- **í—¬ìŠ¤ ì²´í¬**: http://localhost:8000/health

---

## ğŸ“¡ API ë¬¸ì„œ

### Core Endpoints

#### 1. í—¬ìŠ¤ ì²´í¬
```http
GET /health
```

**ì‘ë‹µ ì˜ˆì‹œ**
```json
{
  "status": "ok",
  "service": "InvestAI Core",
  "version": "1.0.0",
  "timestamp": "2026-01-18T10:30:00.000Z"
}
```

#### 2. AI ì§ˆë¬¸ ì²˜ë¦¬ (ë©”ì¸ ì—”ë“œí¬ì¸íŠ¸)
```http
POST /ai/query
Content-Type: application/json
```

**ìš”ì²­ ë°”ë””**
```json
{
  "session_id": "user123-session456",
  "question": "ì‚¼ì„±ì „ìì˜ AI ë°˜ë„ì²´ ì „ë§ì€ ì–´ë•Œ?"
}
```

**ì‘ë‹µ ì˜ˆì‹œ**
```json
{
  "session_id": "user123-session456",
  "question": "ì‚¼ì„±ì „ìì˜ AI ë°˜ë„ì²´ ì „ë§ì€ ì–´ë•Œ?",
  "answer": "NHíˆ¬ìì¦ê¶Œ ë¦¬í¬íŠ¸ì— ë”°ë¥´ë©´, ì‚¼ì„±ì „ìëŠ” HBM3E ì–‘ì‚° ì‹œì‘ìœ¼ë¡œ...",
  "category": "analyst_report",
  "sources": [
    {
      "title": "NHíˆ¬ìì¦ê¶Œ_ì‚¼ì„±ì „ì_20251015.pdf",
      "securities_firm": "NHíˆ¬ìì¦ê¶Œ",
      "date": "20251015",
      "content": "AI ë°˜ë„ì²´ ì‹œì¥ì—ì„œ ì‚¼ì„±ì „ìëŠ”..."
    }
  ],
  "timestamp": "2026-01-18T10:35:00.000Z"
}
```

#### 3. ëŒ€ì‹œë³´ë“œ ë°ì´í„° ì¡°íšŒ
```http
GET /api/dashboard
```

**ì‘ë‹µ êµ¬ì¡°**
```json
{
  "indices": {
    "kospi": {
      "value": 2850.34,
      "changeValue": 12.5,
      "changeRate": 0.44,
      "chartData": [{"value": 2840}, {"value": 2850}, ...]
    },
    "kosdaq": { ... }
  },
  "topGainers": [
    {"code": "005930", "name": "ì‚¼ì„±ì „ì", "price": 75000, "change_rate": 3.5}
  ],
  "topLosers": [...],
  "topVolume": [...],
  "topMarketCap": [...]
}
```

#### 4. ê°œë³„ ì¢…ëª© ì¡°íšŒ
```http
GET /api/stock/{ticker}
```

**ì˜ˆì‹œ**
```bash
curl http://localhost:8000/api/stock/005930
```

**ì‘ë‹µ**
```json
{
  "name": "ì‚¼ì„±ì „ì",
  "ticker": "005930",
  "price": 75000,
  "changePct": 2.3,
  "ohlc": {
    "open": 74000,
    "high": 76000,
    "low": 73500
  }
}
```

---

## ğŸ”„ ì§ˆë¬¸ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸

### ì „ì²´ íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ì‚¬ìš©ì ì§ˆë¬¸ ì…ë ¥                                          â”‚
â”‚     "ì‚¼ì„±ì „ì AI ë°˜ë„ì²´ ì „ë§ì€?"                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Question Classifier (GPT-4 ê¸°ë°˜)                         â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚     â”‚ Prompt: "ë‹¤ìŒ ì§ˆë¬¸ì„ 4ê°€ì§€ ì¹´í…Œê³ ë¦¬ë¡œ ë¶„ë¥˜..."       â”‚   â”‚
â”‚     â”‚ Output: {"category": "analyst_report",           â”‚   â”‚
â”‚     â”‚          "stock_code": "005930"}                 â”‚   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3a. RAG Chain   â”‚         â”‚ 3b. Other Chainsâ”‚
â”‚ (analyst_report)â”‚         â”‚ (stock/economic)â”‚
â”‚                 â”‚         â”‚                 â”‚
â”‚ ChromaDB Search â”‚         â”‚ API Calls       â”‚
â”‚     â†“           â”‚         â”‚     â†“           â”‚
â”‚ Top 3 Documents â”‚         â”‚ Data Fetch      â”‚
â”‚     â†“           â”‚         â”‚     â†“           â”‚
â”‚ GPT-4 Generationâ”‚         â”‚ GPT-4 Analysis  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. ìµœì¢… ì‘ë‹µ ìƒì„±                                            â”‚
â”‚     - ë‹µë³€ (answer)                                          â”‚
â”‚     - ì¶œì²˜ (sources)                                         â”‚
â”‚     - ì¹´í…Œê³ ë¦¬ (category)                                     â”‚
â”‚     - íƒ€ì„ìŠ¤íƒ¬í”„                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì¹´í…Œê³ ë¦¬ë³„ ì²˜ë¦¬ ìƒì„¸

#### ğŸ“Š Economic Indicator Chain
```python
# 1. Spring Boot APIì—ì„œ ìµœì‹  ê²½ì œì§€í‘œ ì¡°íšŒ
indicators = await spring_client.get_economic_indicators()
# {"ê¸°ì¤€ê¸ˆë¦¬": "3.5%", "M2": "3500ì¡°ì›", ...}

# 2. GPT-4ë¡œ ì§€í‘œ í•´ì„ ë° ì˜í–¥ ë¶„ì„
answer = llm.invoke(prompt_template.format(
    question=question,
    indicators=indicators_str
))
```

#### ğŸ“ˆ Stock Price Chain
```python
# 1. pykrxë¡œ ì‹¤ì‹œê°„ ì£¼ê°€ ì¡°íšŒ
stock_data = get_stock_data_from_pykrx(stock_code)

# 2. ê°ì„± ë¶„ì„ (ë“±ë½ë¥  ê¸°ë°˜)
sentiment = analyze_sentiment(stock_data)  # "ê¸ì •", "ì¤‘ë¦½", "ë¶€ì •"

# 3. GPT-4ë¡œ ì£¼ê°€ ë¶„ì„ ë° ì‹œì¥ í•´ì„
answer = llm.invoke(prompt_template.format(
    stock_data=stock_str,
    sentiment=sentiment
))
```

#### ğŸ“‘ Analyst Report Chain (RAG)
```python
# 1. ChromaDB ë²¡í„° ê²€ìƒ‰ (ìœ ì‚¬ë„ ê¸°ë°˜)
retriever = vectorstore.as_retriever(search_kwargs={"k": 3})
docs = retriever.get_relevant_documents(question)

# 2. ê²€ìƒ‰ëœ ë¬¸ì„œë¥¼ ì»¨í…ìŠ¤íŠ¸ë¡œ GPT-4 í˜¸ì¶œ
qa_chain = RetrievalQA.from_chain_type(
    llm=llm,
    retriever=retriever,
    return_source_documents=True
)
result = qa_chain({"query": question})
```

#### ğŸ’¡ General Advice Chain
```python
# GPT-4ì— ì§ì ‘ ì§ˆë¬¸ (ì™¸ë¶€ ë°ì´í„° ì—†ìŒ)
answer = llm.invoke(prompt_template.format(question=question))
```

---

## ğŸ³ ë°°í¬

### Docker ë°°í¬

#### 1. ì´ë¯¸ì§€ ë¹Œë“œ
```bash
docker build -t ai-service:latest .
```

#### 2. ì»¨í…Œì´ë„ˆ ì‹¤í–‰
```bash
docker run -d \
  --name ai-service \
  -p 8000:8000 \
  -e OPENAI_API_KEY=your-api-key \
  ai-service:latest
```

### Kubernetes ë°°í¬ (GKE)

#### 1. Secret ìƒì„±
```bash
kubectl create secret generic jeonbongjun-secrets \
  --from-literal=OPENAI_API_KEY=your-api-key \
  -n jeonbongjun
```

#### 2. ë°°í¬
```bash
# Deployment
kubectl apply -f k8s/ai-service-deployment.yaml

# Service
kubectl apply -f k8s/ai-service-service.yaml

# BackendConfig (Health Check)
kubectl apply -f k8s/ai-config.yaml
```

#### 3. ìƒíƒœ í™•ì¸
```bash
# Pod ìƒíƒœ
kubectl get pods -n jeonbongjun -l app=ai-service

# ë¡œê·¸ í™•ì¸
kubectl logs -f deployment/ai-service-deployment -n jeonbongjun

# Health Check
kubectl exec -it <pod-name> -n jeonbongjun -- curl localhost:8000/health
```

### CI/CD (GitHub Actions)

í”„ë¡œì íŠ¸ëŠ” ìë™ ë¹Œë“œ/ë°°í¬ íŒŒì´í”„ë¼ì¸ì„ í¬í•¨í•©ë‹ˆë‹¤:

```yaml
# .github/workflows/build-push-ai.yaml
on:
  push:
    branches: [main]

jobs:
  - Docker ì´ë¯¸ì§€ ë¹Œë“œ
  - Docker Hubì— í‘¸ì‹œ
  - ë©€í‹° ì•„í‚¤í…ì²˜ ì§€ì› (amd64, arm64)
```

**Docker Hub**: `o11117/ai-service:latest`

---

## ğŸ‘¨â€ğŸ’» ê°œë°œ ê°€ì´ë“œ

### ì¦ê¶Œì‚¬ ë¦¬í¬íŠ¸ ì„ë² ë”©

PDF ë¦¬í¬íŠ¸ë¥¼ ChromaDBì— ì„ë² ë”©í•˜ë ¤ë©´:

```bash
# 1. PDF íŒŒì¼ì„ data/reports/ì— ì¶”ê°€
# íŒŒì¼ëª… í˜•ì‹: {ì¦ê¶Œì‚¬ëª…}_{ì¢…ëª©ëª…}_{ë‚ ì§œ}.pdf
# ì˜ˆ: NHíˆ¬ìì¦ê¶Œ_ì‚¼ì„±ì „ì_20251015.pdf

# 2. ì„ë² ë”© ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
python scripts/embed_reports.py
```

ìŠ¤í¬ë¦½íŠ¸ëŠ” ìë™ìœ¼ë¡œ:
1. PDF íŒŒì¼ ë¡œë“œ
2. í˜ì´ì§€ë³„ë¡œ í…ìŠ¤íŠ¸ ì¶”ì¶œ
3. ì²­í‚¹ (500ì, 50ì ì˜¤ë²„ë©)
4. OpenAI ì„ë² ë”© ìƒì„±
5. ChromaDBì— ì €ì¥

### Jupyter Notebook í…ŒìŠ¤íŠ¸

```bash
# Jupyter ì‹¤í–‰
jupyter notebook

# ë…¸íŠ¸ë¶ ì‹¤í–‰ ìˆœì„œ:
# 1. notebooks/01_classifier_test.ipynb  (ì§ˆë¬¸ ë¶„ë¥˜ í…ŒìŠ¤íŠ¸)
# 2. notebooks/02_rag_test.ipynb         (RAG íŒŒì´í”„ë¼ì¸)
# 3. notebooks/test_full_pipeline.ipynb  (ì „ì²´ í†µí•©)
```

### ë¡œê·¸ í™•ì¸

```bash
# ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„°ë§
tail -f logs/app.log

# ë¡œê·¸ ë ˆë²¨ ë³€ê²½ (.env)
LOG_LEVEL=DEBUG  # DEBUG, INFO, WARNING, ERROR
```

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ

#### 1. OpenAI API ì˜¤ë¥˜
```
Error: Incorrect API key provided
```
**í•´ê²°ì±…**: `.env` íŒŒì¼ì˜ `OPENAI_API_KEY`ë¥¼ í™•ì¸í•˜ì„¸ìš”.

#### 2. ChromaDB ê²½ë¡œ ì˜¤ë¥˜
```
Error: Cannot access chromadb path
```
**í•´ê²°ì±…**: 
```bash
mkdir -p embeddings/chromadb
chmod 755 embeddings/chromadb
```

#### 3. pykrx ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨
```
Error: ì£¼ê°€ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤
```
**í•´ê²°ì±…**: 
- ì£¼ë§/ê³µíœ´ì¼ì—ëŠ” ë°ì´í„°ê°€ ì—†ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì¢…ëª© ì½”ë“œê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ì„¸ìš” (6ìë¦¬ ìˆ«ì).

#### 4. Kubernetes Pod Crash
```
CrashLoopBackOff
```
**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
```bash
# 1. Secret í™•ì¸
kubectl get secret jeonbongjun-secrets -n jeonbongjun

# 2. ë¡œê·¸ í™•ì¸
kubectl logs <pod-name> -n jeonbongjun

# 3. Health Check í™•ì¸
kubectl describe pod <pod-name> -n jeonbongjun
```

#### 5. Spring Boot ì—°ê²° ì‹¤íŒ¨
```
Error: ê²½ì œì§€í‘œ ì¡°íšŒ HTTP ì˜¤ë¥˜
```
**í•´ê²°ì±…**:
- `utils/spring_client.py`ì—ì„œ `base_url` í™•ì¸
- Kubernetes: `http://backend-svc:8080`
- ë¡œì»¬: `http://localhost:8080`

---

## ğŸ“ í–¥í›„ ê°œë°œ ê³„íš

- [ ] **ë©€í‹°í„´ ëŒ€í™” ì§€ì›** - ì„¸ì…˜ ê¸°ë°˜ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ìœ ì§€
- [ ] **ì‹¤ì‹œê°„ ë‰´ìŠ¤ í¬ë¡¤ë§** - ì¦ê¶Œ ë‰´ìŠ¤ ìë™ ìˆ˜ì§‘ ë° ì„ë² ë”©
- [ ] **ë°±í…ŒìŠ¤íŒ… ì‹œë®¬ë ˆì´ì…˜** - AI ì¶”ì²œ ê¸°ë°˜ ê°€ìƒ íˆ¬ì ì„±ê³¼ ë¶„ì„
- [ ] **ê°ì„± ë¶„ì„ ê³ ë„í™”** - BERT ê¸°ë°˜ ë‰´ìŠ¤/SNS ê°ì„± ë¶„ì„
- [ ] **í¬íŠ¸í´ë¦¬ì˜¤ ìµœì í™”** - í˜„ëŒ€ í¬íŠ¸í´ë¦¬ì˜¤ ì´ë¡ (MPT) ì ìš©
- [ ] **WebSocket ì§€ì›** - ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ
- [ ] **ë‹¤êµ­ì–´ ì§€ì›** - ì˜ì–´/ì¤‘êµ­ì–´ ì§ˆë¬¸ ì²˜ë¦¬

---

## ğŸ“œ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

